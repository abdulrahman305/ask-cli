namespace com.dialogSeven

import com.amazon.alexa.ask.conversations.*
import com.amazon.alexa.schema.*
import com.amazon.ask.types.builtins.AMAZON.*
import prompts.*
import slotTypes.*

// API Action

action colorFruitNameResponseType colorFruitName(myColors colorName, Food fruitName = nothing)

// UtteraceSets 

InvokeEvent = utterances(
  samples = [
    "i want to buy a fruit"
  ]
)

informColorEvent = utterances<colorNameType>(
  samples = [
    "{colorName}",
    "color is {colorName}",
    "color {colorName}"
  ]
)

// Type

type colorNameType {
  myColors colorName
}

type colorFruitNameResponseType {
  Food fruitName
  myColors colorName
}

type responsePayloadType {
  colorFruitNameResponseType colorFruitNameResponse
}

dialog Nothing dialogSeven() {

  sample {
    expect(act = Invoke, event = InvokeEvent)
    response( response = request_colorName_apla, 
      act = Request {arguments = [colorFruitName.arguments.colorName]})
    colorEvent = expect(act = Inform, event = informColorEvent)
    apiResponse = colorFruitName(colorName = colorEvent.colorName)
    response(response = success_colorFruitAPI_apla, act = Notify {actionName = colorFruitName},
      payload = responsePayloadType {colorFruitNameResponse = apiResponse})
  }

}